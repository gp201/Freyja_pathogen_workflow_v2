// nextflow configuration file
// main script name
manifest {
    author = 'Praneeth'
    name = 'FreyjaBarcodePipeline'
    homePage = 'https://github.com/gp201/Freyja_pathogen_workflow'
    defaultBranch = 'v1'
    description = 'This pipeline is used to generate pathogen barcodes for the Freyja project.'
    mainScript = 'main.nf'
    version = '1.0.0'
    nextflowVersion = '>=23.04'
}

// Global default params, used in configs
params {
    // Nextflow configurations
    publish_dir_mode = 'copy'
    force_overwrite = false
    outdir = './output'

    // Pipeline parameters
    align_method = 'minimap2'

    // parameters for modules
    fasta = 'sequences.fasta'
    metadata = 'metadata.tsv'
    strain_column = 'strain'
    ref_seq = 'reference.fasta' 
}

timeline {
    enabled = true
    file    = "${params.outdir}/pipeline_info/execution_timeline.html"
}
report {
    enabled = true
    file    = "${params.outdir}/pipeline_info/execution_report.html"
}
trace {
    enabled = true
    file    = "${params.outdir}/pipeline_info/execution_trace.txt"
}
dag {
    enabled = true
    file    = "${params.outdir}/pipeline_info/pipeline_dag.html"
}

profiles {
    debug {
        dumpHashes             = true
        process.beforeScript   = 'echo $HOSTNAME'
        cleanup                = false
    }
    conda {
        conda.enabled          = true
        docker.enabled         = false
        singularity.enabled    = false
        podman.enabled         = false
        shifter.enabled        = false
        charliecloud.enabled   = false
        apptainer.enabled      = false
    }
    mamba {
        conda.enabled          = true
        conda.useMamba         = true
        docker.enabled         = false
        singularity.enabled    = false
        podman.enabled         = false
        shifter.enabled        = false
        charliecloud.enabled   = false
        apptainer.enabled      = false
    }
    docker {
        docker.enabled         = true
        docker.userEmulation   = true
        conda.enabled          = false
        singularity.enabled    = false
        podman.enabled         = false
        shifter.enabled        = false
        charliecloud.enabled   = false
        apptainer.enabled      = false
    }
}
